
# Mdl 

##### **基于maaframework的刀剑乱舞自动化脚本.图像识别+操作**

tips

由于新ui已提在日程,特别解释,暂时只匹配旧版ui,个人开发,诸多漏洞,请多见谅

新ui上了我也不能打包票多久能改成新ui

##### 下载

https://github.com/gitw6/Mdl/releases

##### 打开

install/maaPiCli.exe

## 功能列表

1. 打开游戏(点击不再显示公告,不确定是否有内番确认功能,远征迎接但不自动远征,公告查看完毕后会暂停30秒左右)

2. 远征迎接日课和关通知(旧版,不常用,不知道有没有bug,可接1)

3. 远征前习合,换编队配置,没有樱吹雪的换下(个人不常用,手动换远征1,2,3队无樱吹雪的刀男,不然自动远征大成功概率降低,注意如要默认远征1,2编队需至少一个打刀一个太刀)

4. 远征日课,四个队伍均已返回(个人不常用,逐个将4个编队送到各地图,不记得默认地图了)

5. 刀装中上解体,单(个人不常用,解体单个刀装,若刀装位满,不知道会不会出bug)

6. 刀装中上一键解体,三队不要送出去远征(个人不常用,默认条件为四队均已返回本丸,逐步开始,习合,远征4个队,锻刀*3,刀解*1,刀装*3-刀装需空3位,合成1,领礼物,返回出阵界面,容易出错)

7. 锻刀日课-刀位空,锻刀三次，刀解一次;刀位不空,刀解三个(个人不常用,可以用)

8. 刀装日课，刀装制作三个，需留有三个空(个人不常用,不确定是否加了刀解,如果全部都是特上刀装,会出错)

9. 合成日课，合一个，不包含习合(若最新获取刀男为稀有,则会把他合成掉,没有识别保护,所以用之前需要确认习合已完成,由于远征刀男不在系统识别中,所以最好自己先看看,我觉得还是人手快捷方便,不想浪费,又想全自动,那就刀解一个普通刀男,再到邮箱领取普通刀男,使最新的刀男不是稀有刀男)

10. 领万屋礼物，等待三队归来后再演练(个人不常用,7 8 9 10是6任务拆解的结果,逐个加到任务列表比较麻烦,但是容错率高,某个任务失败之后会进行下一个任务)

11. 演练日课(个人不常用,需配有一队极短,可选择手动编队和自动编队,自动编队需将极短配刀装记录到记录1队,并且执行该任务时,极短没有刀装不匹配或受伤等异常状态,可选演练次数,我们都知道演练场最下的婶婶很难打,一般能赢,如果不是极化99大太刀加白山,极化99太刀这种变态配置,失败了我也没办法,求稳的话1-11都手动,大概10分钟左右吧)

    | 演练日课          |
    | ----------------- |
    | 记录3队到2队,演练 |
    | 清空3队配置,演练  |
    | 3队已配置,演练    |

12. 刷检非，编辑检非部队,相应队员需持有相 应刀装(个人不常用,即第三队已返回本丸,编辑第三部队配置,3to3,如果你只有一个铳兵特上并把他转给了其他刀男,而记录三队的配置的某位刀男的刀装需要这个特上铳兵,则自动编队会失败,简单说就是3to3加刷检非图,刷到检非返回本丸则本任务结束,若返回本丸时124队刚好有一队远征返回,则可能任务失败卡远征返回界面,还有可能自动远征之后再次刷检非图,直到再刷到一次检非再返回,直到...重伤 出阵警告,因为我的编队配置比较全,极化在列,所以不担心检非打成重伤的状态,为避免出错,可以在记录3队的编队配置上下心思,比如全极化刀男加编队等级差不超过多少)

13. 4to3(个人常用,结合活动任务自定义匹配,避免长时间盯着看,见神奇的功能组合)

14. 已编辑三队，刷检非5-2,木炭玉钢冷却材(个人常用,经常放在任务列表第一的位置)

15. 任务奖励-日常,月常,活动(一般,个人常用日常,当然使用的时候需要判断日常任务已全部完成,某些特殊情况:比如刷樱吹雪出阵次数为0+检非在检非图第一个点就出了,那么刷敌次数是不够的,没有红点匹配功能)

    | *常                   |
    | :-------------------- |
    | 日常                  |
    | 月常                  |
    | 活动                  |
    | 主线:在其他奖励前执行 |

    

16. 刷普通地图,需已编辑好第三队(一般,直接出阵普通地图,可结合任务23,13,22进行神奇的功能组合)

    | 普通地图选择                  | 是否打检非 |
    | ------------------------ | ---------- |
    | 3-3 木炭玉钢 练低级刀和薙刀     | 不打       |
    | 4-3 木炭玉钢冷却材 资源多城管少 | 打         |
    | 7-1 木炭玉钢委托符 练高等级刀   |            |
    | 2-4 无伤刷委托符                |            |

    

17. 活动:江户城(一般,不要在活动结束后执行该任务,会失败,默认图四,打不过中途返回不知道会出什么问题,有几次因为图四步骤过多会报错,可能memory不够用,为减少该情况,推荐三次刷图次数刷新后立即执行该任务,留6次一次刷完可能会执行一半报错,后续任务也失败)

    | 是否补充令牌-江户城  |
    | -------------------- |
    | 补充令牌后无次数限制 |
    | 不补充               |

    

18. 活动：战扩-搜索(可选地图,真伤活动会自动回城,重伤回城自动修复使用加速符,刀装打掉了的话,打到王点战斗结束后再出阵到刀装提醒界面就结束,我个人存了很多加速符,打不过就刷前面的图,会自动使用加速符,加速符归零ing,默认循环刷图)

    | 战扩地图选择              |
    | ------------------------- |
    | 石切丸/巴形薙刀搜索       |
    | 岩融/日本号搜索           |
    | 大般若长光/太阁左文字搜索 |
    | 骚速剑/南泉一文字搜索     |

    

19. 活动:地下城(个人常用,真伤活动,可选刷图模式和刷某一层,刷图打穿了99层之后刷某一层才正常,不然我不确定会跑到哪一层,默认循环刷图,重伤后自动返回本丸,自动远征,自动内番,重伤警告后返回本丸,结束,可结合自动修复进行神奇的功能组合)

    | 层数选择                 |
    | ------------------------ |
    | 10层,刷博多              |
    | 20层,刷后藤              |
    | 30层,刷信浓              |
    | 40层,刷包丁              |
    | 50层,刷毛利              |
    | 51层,刷白山              |
    | 89层,刷白山              |
    | 95刷鬼丸国纲             |
    | 刷图模式or99层,鬼丸,白山 |

    

20. 活动:联队战-暂时为海边(默认一个队伍打到底,可选小判买令牌和刷每天发的免费次数,小判无次数限制,小判归零ing,若失败,我不知道会出什么错)

    | 是否补充令牌-联队战 | 补充几个                                  | 联队战-难度选择 |
    | ------------------- | ----------------------------------------- | --------------- |
    | 小判消耗            | 补充1个,默认,联队战节省时间,其他均默认1个 | 易-图一         |
    | 不补充              | 补充3个                                   | 普-图二         |
    |                     |                                           | 难-图三         |
    |                     |                                           | 超难-图四       |

    

21. 活动:秘宝之里-花牌(一般,我觉得这个活动收益不高,并且国服乐曲不全,可用,也会卡住,这个活动并没有举行几次,所以不好改,虽然非真伤活动,但是对刀男的等级要求不低)

    | 是否补充令牌-秘宝之里 |
    | --------------------- |
    | 小判消耗              |
    | 不补充                |

    

22. 2to3(常用,记录2队to编辑3队)

23. 3to3(常用,记录3队to编辑3队)

24. 自动修复-重伤中伤(常用,可选是否使用加速符,是否只修复重伤中伤)

    | 是否使用加速符修复 | 是否优先修复重伤中伤 |
    | ------------------ | -------------------- |
    | 是                 | 是                   |
    | 否                 | 否                   |

    

25. 三队编队清零,自动编队刷花,极化未极化自选(常用,个人喜欢先刷花再编队出阵,樱吹雪状态经验收益和检非出现概率会降低,我喜欢完全胜利s,可选刷极化刀男和未极化刀男,极化刀男有一定概率识别出错,ocr匹配度0.4tmd,相对位移的操作也不完善,不会custom导致的局面,极化刀男疲劳度100则继续换下一个极化刀男,不自动卸下刀装,刀装不够的时候可能会出错;刀男疲劳度不满100则自动装备刀装,出阵,自动远征迎接;未极化刀男需要上锁,并且没有中间夹远征的未极化刀男,夹了失败,所以我个人的做法是三队清零之后队长位放一个未极化并且手动为他装备刀装好之后再执行该任务)

    | 樱吹雪模式                                                   |
    | ------------------------------------------------------------ |
    | 极化模式                                                     |
    | 未极化模式,有可能选中修复状态的刀剑,推荐未极化刀剑远征和无伤活动为主 |

    

26. 三队刷樱花，先将需要刷花的角色放到三队，单个(只刷单个刀男的疲劳度,疲劳度达到100,停在疲劳度查看界面,任务结束,现已不常用,是25的初版)

    | 樱吹雪模式                                                   |
    | ------------------------------------------------------------ |
    | 极化模式                                                     |
    | 未极化模式,有可能选中修复状态的刀剑,推荐未极化刀剑远征和无伤活动为主 |

    

27. 换三队中伤重伤的为极化刀剑,暂时被废弃(存在把三队2号换到4号的操作,4号重伤,把2号换到4号位的情况,暂时没有更好的实现方式)

28. 三队远征4-4,睡前远征,不记录三队配置(不常用,3to3+3队远征)

29. 关闭游戏(比较鸡肋,但是是刷普通图的初版,因为djlw需要很长时间的在线和很高的活跃度,所以我在一个模拟器只安了这一个游戏,刷一天都不腻)

## 个人习惯

先手机打开签到,四队远征,锻刀刀解刀装合成内番和领礼物手动,全程10分钟以内

洗漱等杂事结束再开电脑模拟器,终端连上之后就不用重新配置,task列表会记录之前的任务

重复操作再用脚本

功能列表有写日课全程 6 ,但是没有手动快,并且其中有很多容易出错的地方,不推荐

常用功能14到25,个人使用截图

![屏幕截图 2025-01-07 230159](G:\project\MaaTest\gitclone\mdl\屏幕截图 2025-01-07 230159.png)

## 避免报错所需注意的事项

近侍设置为秋田藤四郎,运行脚本时需要将界面设置为可以看见出阵按钮的界面

远征列表需要展开,尽量

对于刷需要返回本丸的任务时,远征需设置为长时间,自动远征迎接和自动远征还不成熟,有的成功有的失败,自动远征地图已写死,不好更改

出阵时需要设置1,2,4队远征,不然容易出错.

三队做日课,出阵,演练,部分活动

侦察失败后自动选择左上角阵型,为避免封号等操作,不要一直挂着,理论上该脚本没有修改服务器数据,但是熬不住有人卖号,存在网络波动影响任务执行的状况,暂无改进方式

命令行界面使用方法

| switch controller | 默认win32,其他的我不会用,选择模拟器及端口号    |
| ----------------- | ---------------------------------------------- |
| switch resource   | 官服b服选择                                    |
| add task          | 添加任务到任务列表                             |
| move task         | 在任务列表中移动任务,比如从3移到1              |
| delete task       | 从任务列表删除任务                             |
| run task          | 执行任务,会有几率执行出错冒红字,不管他多试几次 |
| exit              | 退出命令行窗口                                 |

这是执行正常的界面,task completed代表任务执行完毕,task failed代表任务出错

![屏幕截图 2025-01-07 234058](G:\project\MaaTest\gitclone\mdl\屏幕截图 2025-01-07 234058.png)

红字出现不代表执行出错,下面正常运行就不管他

![屏幕截图 2025-01-08 130551](G:\project\MaaTest\gitclone\mdl\屏幕截图 2025-01-08 130551.png)

图形化界面目前还不会用,mfw有个通用的,我用完了再分享经验

## 神奇的功能组合

自动修复+3to3+活动+4to3+活动+2to3+活动

依此类推,但是需要2,3,4的记录队伍刀装备好,即刀位不够,刀男刀装状态改变时,会干扰后续任务执行

## 没有技术,全都是爱

完全基于pipepline编写,没有custom,我不会,全程个人开发,希望有机会进列表,很多代码冗余,但是没精力改进了,能跑能用就行,github也是刚刚会用,分支和版本管理也不熟,多多包含.

审神者注意,锁刀男,游戏本身有保护,出了重伤警告脚本一般能识别并返回本丸,但是使用中需要量力而行,不要用全1级的刀男打地下99层这种,我知道很多人读不完这么长的使用注意事项,我尽力了,对于一个readme来说,他太长了...







